<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-DevOps和站点可靠性工程简介/第 7 章 可观测性简介" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">第 7 章 可观测性简介 | ZHOUWEI</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://zhouwei.co/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://zhouwei.co/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://zhouwei.co/docs/DevOps和站点可靠性工程简介/第 7 章 可观测性简介"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="第 7 章 可观测性简介 | ZHOUWEI"><meta data-rh="true" name="description" content="本章讨论可观测性。我们研究可观察性的目标，通过提供洞察力来帮助团队在影响用户之前主动解决问题，从而提高系统的可靠性和性能。"><meta data-rh="true" property="og:description" content="本章讨论可观测性。我们研究可观察性的目标，通过提供洞察力来帮助团队在影响用户之前主动解决问题，从而提高系统的可靠性和性能。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://zhouwei.co/docs/DevOps和站点可靠性工程简介/第 7 章 可观测性简介"><link data-rh="true" rel="alternate" href="https://zhouwei.co/docs/DevOps和站点可靠性工程简介/第 7 章 可观测性简介" hreflang="zh"><link data-rh="true" rel="alternate" href="https://zhouwei.co/docs/DevOps和站点可靠性工程简介/第 7 章 可观测性简介" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://6AM3IH46PZ-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ZHOUWEI RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ZHOUWEI Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="ZHOUWEI" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.37b61219.css">
<script src="/assets/js/runtime~main.f08b04f4.js" defer="defer"></script>
<script src="/assets/js/main.9fc046ad.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.jpg" alt="ZHOUWEI" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.jpg" alt="ZHOUWEI" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">ZHOUWEI</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/category/devops和站点可靠性工程简介">文档</a><a class="navbar__item navbar__link" href="/blog">博客</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/devops和站点可靠性工程简介">DevOps和站点可靠性工程简介</a><button aria-label="折叠侧边栏分类 &#x27;DevOps和站点可靠性工程简介&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps和站点可靠性工程简介/第 1 章 欢迎">第 1 章 欢迎</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps和站点可靠性工程简介/第 2 章 DevOps 与 SRE 简介">第 2 章 DevOps 与 SRE 简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps和站点可靠性工程简介/第 3 章 云计算入门">第 3 章 云计算入门</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps和站点可靠性工程简介/第 4 章 容器与 Kubernetes 入门">第 4 章 容器与 Kubernetes 入门</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps和站点可靠性工程简介/第 5 章 基础架构即代码（IaC）">第 5 章 基础架构即代码 (IaC)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps和站点可靠性工程简介/第 6 章 持续集与成持续交付（CICD）">第 6 章 持续集成与持续交付（CICD）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/DevOps和站点可靠性工程简介/第 7 章 可观测性简介">第 7 章 可观测性简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOps和站点可靠性工程简介/第 8 章 站点可靠性工程（SRE）">第 8 章 站点可靠性工程（SRE）</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/devops和站点可靠性工程简介"><span itemprop="name">DevOps和站点可靠性工程简介</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">第 7 章 可观测性简介</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>第 7 章 可观测性简介</h1></header>
<h1>概述和学习目标</h1>
<p>本章讨论可观测性。我们研究可观察性的目标，通过提供洞察力  来帮助团队在影响用户之前主动解决问题，从而提高系统的可靠性和性能。</p>
<p>在复杂软件系统的世界中，可观察性是能够看到此类系统的 “内部”，从而深入了解其运行状况，性能和行为。可观察性超越了简单的监控。这就像拥有x射线视觉，通过三个关键支柱提供多个视角: 指标 (像CPU使用率这样的数字指标)，日志 (详细的事件记录)，和跟踪 (映射请求如何流过系统)。结合这些观点，可以描绘出一幅清晰的图景。</p>
<p>通过利用与可观察性相关的工具和实践，团队可以快速识别异常，了解依赖关系，并根据实时数据做出明智的决策。这种方法在复杂的分布式系统中尤为重要，在这些系统中，了解不同组件之间的交互可能具有挑战性。可观察性有助于使系统更加透明和可维护，从而增强整体系统弹性和用户满意度。</p>
<p>在本章结束时，您应该能够:</p>
<ul>
<li>定义可观察性</li>
<li>解释日志、度量和跟踪如何形成可观察性的支柱</li>
<li>探索可观察性如何帮助主动识别和修复问题并提高系统可靠性</li>
</ul>
<h1>什么是可观察性？</h1>
<p>可观察性是根据系统的外部输出来理解系统内部状态的能力。这意味着能够根据其产生的信息 (例如日志，度量和跟踪) 来推断系统内部正在发生的事情。</p>
<p>在现代软件开发世界中，可观察性变得越来越重要，在该世界中，系统变得越来越复杂和分布式。使用传统的监控方法，可能很难理解系统内部发生了什么，以及为什么它以某种方式表现出来。可观察性提供了一种克服这一挑战的方法，让我们对系统有了更全面的看法。</p>
<h1>可观测性的三大支柱</h1>
<p>可观察性的三大支柱构成了全面评估IT基础架构的健康和效率的关键框架，尤其是在基于云的和微服务的生态系统中。通过共同检查这些支柱  ，您可以对系统的操作，可靠性进行复杂的了解，从而实现有效的问题诊断和性能增强。这确保了用户可靠和简化的体验。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="日志">日志<a href="#日志" class="hash-link" aria-label="日志的直接链接" title="日志的直接链接">​</a></h2>
<p>日志是系统内发生的事件的数字记录。这些记录是顺序的和带有时间戳的，提供了详细的，带有时间戳的活动审计跟踪。日志可以包括广泛的数据，从用户访问的简单记录到软件开发人员用来调试问题的详细错误消息。在可观察性的背景下，日志提供了叙述性细节，以补充来自度量的定量数据和来自跟踪的流信息。它们使开发人员和运营团队能够深入研究问题的根本原因，了解随着时间推移的系统行为，并保持卓越的运营。</p>
<p>日志在可观察性策略中起着关键作用，它提供了对导致问题的确切事件顺序的见解，使其对于事件响应和系统优化必不可少。</p>
<p>日志可以分为几种类型，每种类型都服务于组织内的特定目的:</p>
<ul>
<li>应用程序日志记录在应用程序层内发生的事件，例如用户操作、系统错误或事务。这些日志对于理解应用程序在实际场景中的行为以及识别应用程序级别的问题至关重要。</li>
<li>系统记录操作系统级别的文档事件，包括系统调用、计划任务和来自内核的消息。这些日志有助于诊断与应用程序不直接相关但会影响其性能的硬件和软件问题。</li>
<li>审计日志关注与安全相关的事件，跟踪用户活动和对系统配置的更改。它们对于合规性，安全监视和取证分析至关重要。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="指标">指标<a href="#指标" class="hash-link" aria-label="指标的直接链接" title="指标的直接链接">​</a></h2>
<p>在这三大支柱中，指标是定量的心  跳，为系统行为提供了可衡量的见解。可观察性中的度量定义为表示给定时间点系统特征的数值。这些范围可以从简单的测量 (如CPU利用率和内存使用率) 到更复杂的聚合 (如请求率、错误计数或事务持续时间)。与提供详细的事件驱动记录或跟踪的日志不同，这些日志映射了通过系统的请求旅程，度量标准提供了系统行为和性能的高级汇总视图。这些可量化的数据对于设置基准、识别趋势以及在超过预定义阈值时触发警报至关重要。</p>
<p>指标可以分为几种类型，每种类型都服务于组织内的特定目的:</p>
<ul>
<li>系统指标提供了对基础架构的运行状况和性能的洞察，例如CPU负载、内存消耗、磁盘I/O和网络带宽。</li>
<li>应用指标集中在软件层，跟踪应用性能，包括请求延迟、吞吐量、错误率和交易量。</li>
<li>业务指标 (如每日活跃用户、转化率和收入指标) 虽然与系统或应用程序运行状况没有直接关系，但提供了系统性能对业务结果的影响的视图。</li>
</ul>
<p>了解和监视这些不同类型的度量标准使组织能够对其系统的运行状况，性能以及其运营策略的有效性保持整体视图。度量的收集和分析是可观察性的关键过程。收集涉及从系统的各个部分收集度量数据，这可以通过应用程序内的仪表或利用外部监视工具来促进。收集后，将数据汇总并进行分析，以识别模式，趋势和异常情况。</p>
<p>有效的分析需要使用专门用于时间序列数据处理，可视化和警报的工具和平台。最佳实践包括为警报设置实际的阈值级别，采用异常检测算法以及关联来自不同来源的度量，以全面了解系统行为。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="痕迹">痕迹<a href="#痕迹" class="hash-link" aria-label="痕迹的直接链接" title="痕迹的直接链接">​</a></h2>
<p>痕迹是可观察  性的另一个支柱，它充当引导光，照亮系统内用户交互所采取的复杂路径。它们代表跨分布式系统的单个请求或事务的旅程，捕获它所采用的路径并测量其跨各种服务的延迟。通过拥抱它们的力量并战略性地实施它们，您可以更深入地了解系统行为，有效地确定问题并优化无缝的用户体验。请记住，真正可观察性的旅程需要结合指标的定量能力，日志的详细叙述以及痕迹的视觉表示，提供系统内部工作的完整图片，并使您能够构建和管理真正可靠和高效的软件体验。</p>
<p>跟踪通常由几个关键组件组成:</p>
<ul>
<li>跨度表示跟踪中的单个操作或组件交互，通常包括开始和结束时间，从而允许测量延迟。</li>
<li>跟踪上下文跨流程，网络和服务边界承载跟踪的标识，从而确保正确关联属于单个跟踪的所有跨度。</li>
<li>注释和元数据是附加到span的附加信息，例如用户id，错误消息或其他上下文数据，从而通过有助于分析和调试的详细信息丰富了跟踪。</li>
</ul>
<p>跟踪可分为几种类型，每种类型可满足不同的监视和诊断需求:</p>
<ul>
<li>分布式跟踪通过微服务或分布式体系结构跟踪请求的旅程，突出显示服务之间的交互和延迟。</li>
<li>真实用户监控 (RUM) 捕获了与系统的实际用户交互的痕迹，从而提供了对用户体验和性能问题的见解。</li>
<li>合成监视使用模拟请求以受控的方式监视系统性能和可用性，以一致的基线测量来补充真实的用户数据。</li>
</ul>
<p>通过收集和分析这三种类型的数据，我们可以深入了解系统的工作方式，并识别可能发生的任何问题。</p>
<h1>为什么需要可观察性？</h1>
<p>可观察性是一个至关重要的DevOps概念，在确保软件应用程序和服务的可靠性、性能和整体成功方面发挥着关键作用。它超越了传统的监控，提供了对 系统健康和行为的全面、实时的洞察。以下是DevOps中需要可观察性的几个关键原因。</p>
<ul>
<li>现代系统的复杂性随着微服务架构、云计算和分布式系统的兴起，应用变得更加复杂。可观察性对于理解和管理这种复杂性至关重要。</li>
<li>更快的事件解决方案可观察性工具可以更快地检测和解决问题。团队可以识别问题，了解其根本原因，并更快地实施解决方案，从而减少停机时间。</li>
<li>改善用户体验通过主动监视和分析系统行为，团队可以通过在用户受到影响之前识别和解决性能问题来增强整体用户体验。</li>
<li>改进的故障排除可观察性可以帮助您快速有效地识别和诊断问题。通过分析日志、度量和跟踪，您可以查明问题的根本原因并采取纠正措施。</li>
<li>增强性能可观察性可以通过识别瓶颈和资源约束来帮助您优化系统的性能。</li>
<li>降低成本通过主动识别和解决问题，可观察性可以帮助您降低停机成本和生产力损失。</li>
</ul>
<h1>可观察性堆栈的组件</h1>
<p>可观察性堆栈是工具和技术的集合，这些工具和技术可以协同工作，以提供有关软件系统的运行状况，性能和行为的见解。这些见解可帮助您快速识别和解决问题，优化性能并确保流畅的用户体验。集成良好的可观察性堆栈对于在当今复杂的数字环境中维护高性能和可靠的系统至关重要。它为团队提供了做出明智决策和保持最佳运营效率所需的洞察力。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据收集">数据收集<a href="#数据收集" class="hash-link" aria-label="数据收集的直接链接" title="数据收集的直接链接">​</a></h2>
<ul>
<li>仪器仪表这涉及向应用程序和基础结构添加代码以收集遥测数据，包括指标、日志和跟踪。流行的技术包括OpenTelemetry，Prometheus和ELK Stack (Elasticsearch，Logstash，Kibana)。</li>
<li>代理这些是在您的系统上运行的轻量级程序，并从各种来源 (如应用程序、容器和操作系统) 收集数据。一些流行的代理包括Datadog代理，Fluentd和Telegraf。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据存储和管理">数据存储和管理<a href="#数据存储和管理" class="hash-link" aria-label="数据存储和管理的直接链接" title="数据存储和管理的直接链接">​</a></h2>
<ul>
<li>公制商店这些数据库存储和管理时间序列度量数据，使您可以跟踪和分析历史趋势。热门选择包括普罗米修斯、InfluxDB和TimescaleDB。</li>
<li>日志聚合器这些系统收集、集中和存储来自各种来源的日志数据。流行的选择包括Elasticsearch、Logstash和Graylog。</li>
<li>跟踪存储由于其高容量和复杂的结构，跟踪需要专门的存储解决方案。流行的选项包括Jaeger，Zipkin和Honeycomb。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据分析和可视化">数据分析和可视化<a href="#数据分析和可视化" class="hash-link" aria-label="数据分析和可视化的直接链接" title="数据分析和可视化的直接链接">​</a></h2>
<ul>
<li>仪表板和图表这些工具可帮助您以易于理解和分析的方式可视化数据。流行的选项包括Grafana、Kibana和Datadog仪表板。</li>
<li>警报和通知这些系统通过在违反预定义阈值时发送警报来帮助您随时了解关键事件和事件。流行的选择包括Prometheus Alertmanager，PagerDuty和Slack集成。</li>
<li>分析和故障排除工具这些工具可帮助您深入分析数据，以找出问题的根本原因并找到解决方案。流行的选择包括蜂窝，Datadog APM和New Relic APM。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="附加组件">附加组件<a href="#附加组件" class="hash-link" aria-label="附加组件的直接链接" title="附加组件的直接链接">​</a></h2>
<ul>
<li>服务网格该技术提供了其他可观察性功能，例如分布式跟踪和流量管理。受欢迎的服务网格包括Istio和Linkerd。</li>
<li>混沌工程这种做法涉及有意地将故障注入您的系统，以查看其反应方式，帮助您识别并减轻潜在的弱点。流行的工具包括混沌猴子和Gremlin。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="选择正确的组件">选择正确的组件<a href="#选择正确的组件" class="hash-link" aria-label="选择正确的组件的直接链接" title="选择正确的组件的直接链接">​</a></h2>
<p>您的可观察性堆栈中需要的特定组件将取决于您的特定需求和要求。考虑一些因素，例如系统的规模和复杂性，预算以及团队的技能。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="建立可观察性堆栈">建立可观察性堆栈<a href="#建立可观察性堆栈" class="hash-link" aria-label="建立可观察性堆栈的直接链接" title="建立可观察性堆栈的直接链接">​</a></h2>
<p>有几种方法来构建你的可观察性堆栈:</p>
<ul>
<li>开源解决方案您可以结合各种开源工具来构建自己的堆栈。这种方法提供了灵活性和成本效益，但需要更多的努力和专业知识。</li>
<li>托管服务云提供商和其他供应商提供的托管可观察性解决方案易于设置和使用，但价格可能更高。</li>
<li>混合方法您可以将开源工具与托管服务相结合，以获得满足您特定需求和预算的量身定制的解决方案。有效的可观察性堆栈对于现代软件开发至关重要。</li>
</ul>
<p>通过选择正确的组件并采用数据驱动的方法，您可以获得对系统的宝贵见解，提高其性能和可靠性，并提供更好的用户体验。工具示例:</p>
<ul>
<li>监控工具: 用于收集和聚合数据的系统，例如Prometheus，Grafana或Datadog。</li>
<li>日志记录系统: ELK Stack (Elasticsearch，Logstash，Kibana) 或Splunk等平台，用于收集和分析日志。</li>
<li>跟踪系统: 分布式跟踪工具，如Jaeger、Zipkin或OpenTelemetry，用于跟踪请求在分布式系统中移动时的请求。</li>
</ul>
<h1>DevOps和SRE中的可观察性</h1>
<p>可观察性是DevOps (开发和运营) 和SRE (站点可靠性工程) 实践的关键方面，因为它在确保可靠性，性能，以及现代复杂系统的高效运行。以下是可观察性如何集成到DevOps和SRE中。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="devops中的可观察性">DevOps中的可观察性:<a href="#devops中的可观察性" class="hash-link" aria-label="DevOps中的可观察性:的直接链接" title="DevOps中的可观察性:的直接链接">​</a></h2>
<p>连续监控:</p>
<ul>
<li>目的: DevOps强调持续集成、持续交付 (CI/CD) 和持续监控。可观察性已集成到监视阶段，以提供对应用程序运行状况和性能的实时见解。</li>
<li>角色: DevOps团队使用可观察性工具来监视应用程序指标、日志和跟踪，使他们能够快速检测和解决问题。</li>
</ul>
<p>反馈循环:</p>
<ul>
<li>目标: DevOps实践涉及缩短反馈循环以促进快速迭代和改进。可观察性通过提供对更改对系统影响的可操作见解来促进这些反馈循环。</li>
<li>角色: 开发人员会收到有关代码更改如何影响系统行为的反馈，帮助他们做出明智的决策和改进。</li>
</ul>
<p>跨团队协作:</p>
<ul>
<li>目标: DevOps鼓励开发、运营和其他利益相关者之间的合作。可观察性工具为不同的团队提供了共同的语言和平台，以分享见解并共同解决问题。</li>
<li>角色: 可观察性促进了一种共同责任的文化，开发人员和运营团队在识别和解决问题上进行协作。</li>
</ul>
<p>基础设施as代码 (IaC):</p>
<ul>
<li>目标: DevOps促进使用基础架构作为一致和自动化基础架构管理的代码。可观察性已集成到IaC中，以监视和分析基础架构更改的影响。</li>
<li>作用: 可观察性有助于评估基础架构更改的性能和可靠性，确保它们满足运营要求。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="现场可靠性工程-sre-中的可观测性">现场可靠性工程 (SRE) 中的可观测性<a href="#现场可靠性工程-sre-中的可观测性" class="hash-link" aria-label="现场可靠性工程 (SRE) 中的可观测性的直接链接" title="现场可靠性工程 (SRE) 中的可观测性的直接链接">​</a></h2>
<p>在DevOps和SRE实践中，可观察性不仅仅是监控; 它是关于理解整个系统的行为，从应用程序代码到基础架构，并利用这种理解来确保可靠性、效率、和持续改进。可观察性实践与这些方法的原则紧密一致，支持协作，自动化，并专注于向最终用户提供可靠的服务。</p>
<p>理解服务水平协议 (SLA) 、服务水平目标 (SLO) 和服务水平指标 (SLI) 在云原生技术和可观察性领域至关重要。这些概念对于确保服务达到其性能和可靠性目标至关重要，这对于保持用户满意度和卓越运营至关重要。这些概念不是孤立的元素，而是一个协作框架。通过有效利用sla、slo、sli和可观察性，您可以确保您的软件系统兑现承诺，保持用户信任，并在竞争环境中蓬勃发展。我们将在下一章讨论sla、SLIs和slo。</p>
<h1>可观察性方面的挑战</h1>
<p>可观察性是管理复杂系统的关键方面，但它也面临着一系列挑战。以下是可观察性方面的一些常见挑战:</p>
<p>1.数据量和开销:</p>
<ul>
<li>挑战: 现代系统生成大量数据，包括日志、度量和跟踪。管理和分析这些数据量可能是压倒性的，导致存储、处理和相关成本方面的挑战。</li>
<li>解决方案: 实施智能数据采样和聚合技术可以帮助减少数据量，而不会牺牲基本的洞察力。</li>
</ul>
<p>2.集成复杂度:</p>
<ul>
<li>挑战: 将各种可观察性工具和平台集成到一个系统中可能会很复杂。不同的工具可能使用不同的格式和标准，从而导致集成挑战。</li>
<li>解决方案: 采用标准格式 (例如用于跟踪的OpenTelemetry)，并使用可观察性平台，这些平台易于与通用监视和日志记录工具集成，可以简化流程。</li>
</ul>
<p>3.缺乏标准化:</p>
<ul>
<li>挑战: 整个可观察性领域缺乏标准化的实践和格式，这使得实施一致的方法具有挑战性。不同的工具可能会对度量、日志和跟踪使用不同的约定。</li>
<li>解决方案: 诸如OpenTelemetry之类的全行业计划正在努力使可观察性实践标准化。采用这些标准可以提高工具之间的互操作性。</li>
</ul>
<p>4.复杂的分布式系统:</p>
<ul>
<li>挑战: 在微服务体系结构和分布式系统中，理解不同组件之间的关系和依赖关系可能会很复杂。跨各种服务和组件跟踪请求可能具有挑战性。</li>
<li>解决方案: 实现分布式跟踪工具和实践，结合定义良好的服务网格，可以帮助可视化和理解通过系统的请求流。</li>
</ul>
<p>5.安全和隐私问题:</p>
<ul>
<li>挑战: 收集和存储可观察性数据可能会引起安全性和隐私问题，尤其是在处理敏感信息时。平衡对可见性的需求和数据保护要求至关重要。</li>
<li>解决方案: 实施适当的访问控制、加密和敏感数据的匿名化可以帮助解决安全和隐私问题。</li>
</ul>
<p>6.警惕疲劳:</p>
<ul>
<li>挑战: 过多的误报或不相关的警报会导致警报疲劳，操作员不堪重负，可能会开始忽略警报。</li>
<li>解决方案: 微调警报阈值，实施智能警报策略，使用异常检测技术可以帮助减少警报疲劳。</li>
</ul>
<p>7.工具扩散:</p>
<ul>
<li>挑战: 可观察性景观有许多工具，每个工具都专门用于特定目的。采用太多的工具会导致工具蔓延，使其管理和维护具有挑战性。</li>
<li>解决方案: 根据特定的用例仔细评估和选择 可观察性工具。目标是提供全面覆盖而没有不必要重复的工具。</li>
</ul>
<p>8.文化阻力:</p>
<ul>
<li>挑战: 由于缺乏理解、文化障碍或对变化的担忧，一些团队或组织可能面临采用可观察性做法的阻力。</li>
<li>解决方案: 培养协作文化并强调可观察性在更快的问题解决，提高系统可靠性和更好的用户体验方面的好处，可以帮助克服阻力。</li>
</ul>
<p>应对这些挑战需要技术、流程改进和文化转变的结合。持续学习，了解行业最佳实践以及采用标准化方法可以为更有效的可观察性策略做出贡献。</p>
<h1>流行的可观察性工具</h1>
<p>让我们来看看一些流行的可观察性工具。</p>
<p>1.监控和度量:</p>
<ul>
<li>Prometheus: 专为可靠性和可扩展性而设计的开源监视和警报工具包。它从配置的目标收集度量，存储它们，并使它们可用于查询。</li>
<li>Grafana: 一个流行的开源平台，用于可视化和分析指标。Grafana集成了各种数据源，包括Prometheus，InfluxDB和Elasticsearch。</li>
<li>InfluxDB: 高性能、分布式、可扩展的时序数据库。它通常用于存储和查询指标数据。</li>
<li>Datadog: 基于云的可观察性平台，集成了监控、日志记录和APM (Application Performance monitoring) 功能。它支持广泛的集成。</li>
</ul>
<p>2.日志记录:</p>
<ul>
<li>ELK Stack (Elasticsearch，Logstash，Kibana): Elasticsearch是一个分布式搜索和分析引擎，Logstash是一个日志管道工具，Kibana是一个可视化平台。它们共同构成了一个强大的日志管理堆栈。</li>
<li>Splunk: 一个广泛使用的平台，用于搜索、监视和分析机器生成的数据，包括日志。它提供了强大的搜索和可视化功能。</li>
</ul>
<p>3.追踪:</p>
<ul>
<li>Jaeger: 一个开源的端到端分布式跟踪系统。它有助于监视和排除复杂的基于微服务的体系结构中的请求延迟。</li>
<li>Zipkin: 另一个  开源的分布式跟踪系统。Zipkin允许用户在分布式系统中的各种服务中跟踪请求。</li>
</ul>
<p>应用性能监控 (APM):</p>
<ul>
<li>New Relic: 一种基于云的APM工具，可提供对应用程序性能的详细见解。它提供了事务跟踪，错误跟踪和基础架构监视等功能。</li>
<li>AppDynamics: 全面的APM解决方案，可实时监控应用程序，用户体验和基础架构。它有助于识别性能瓶颈。</li>
</ul>
<p>基础设施监控:</p>
<ul>
<li>Nagios: 一种广泛使用的开源基础设施监控解决方案。Nagios可以监视主机，服务和网络设备，并在出现问题时提供警报。</li>
<li>Zabbix: 一种开源监控解决方案，提供用于监控服务器、网络、应用程序和服务的功能。它支持一系列数据可视化选项。</li>
</ul>
<p>云原生可观察性:</p>
<ul>
<li>AWS CloudWatch: 亚马逊针对AWS资源的监控和可观察性服务。它为AWS服务和应用程序提供度量、日志和跟踪。</li>
<li>Azure Monitor: Microsoft Azure的可观察性服务，提供有关Azure平台上应用程序和基础架构的性能和运行状况的见解。</li>
</ul>
<p>这些工具迎合了可观察性的不同方面，组织经常使用它们的组合来全面了解其系统。在选择可观察性工具时，必须考虑组织的特定需求、集成能力、易用性和可扩展性等因素。此外，建议检查这些工具的最新更新和社区支持。</p>
<h1>实验室7。设置Prometheus和Grafana</h1>
<p><a href="https://www.yuque.com/attachments/yuque/0/2024/pdf/646294/1710900925396-2eeae6ab-4745-459c-8fb9-a31738ab3cb1.pdf" target="_blank" rel="noopener noreferrer">asset-v1-LinuxFoundationX+LFS162x+1T2024+type@asset+block@Chapter_7_Lab_-_Prometheus_and_Grafana.pdf</a></p>
<h1>第7章总结</h1>
<p>本章讨论了可观察性，这是云原生技术中的一个基本概念，对于DevOps和站点可靠性工程实践至关重要。我们将可观察性定义为从系统的外部输出推断系统内部 状态的能力，强调其在依赖于微服务和分布式系统的现代复杂软件体系结构中的重要性。在确保系统性能，可靠性和客户满意度的背景下讨论了可观察性的必要性。本章概述了可观察性堆栈的关键组件-指标，日志和跟踪-它们共同提供了系统运行状况的整体视图，并且对于有效的监视和故障排除至关重要。</p>
<p>此外，本章探讨了可观察性与DevOps和SRE的集成，重点介绍了它如何支持持续改进，培养共同责任的文化，并通过可操作的见解帮助实现服务水平目标。它解决了与实现可观察性相关的挑战，例如数据复杂性和对熟练解释的需求，并概述了可观察性领域中的流行工具。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/dev-ops">DevOps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/sre">SRE</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/DevOps和站点可靠性工程简介/第 6 章 持续集与成持续交付（CICD）"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">第 6 章 持续集成与持续交付（CICD）</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/DevOps和站点可靠性工程简介/第 8 章 站点可靠性工程（SRE）"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">第 8 章 站点可靠性工程（SRE）</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#日  志" class="table-of-contents__link toc-highlight">日志</a></li><li><a href="#指标" class="table-of-contents__link toc-highlight">指标</a></li><li><a href="#痕迹" class="table-of-contents__link toc-highlight">痕迹</a></li><li><a href="#数据收集" class="table-of-contents__link toc-highlight">数据收集</a></li><li><a href="#数据存储和管理" class="table-of-contents__link toc-highlight">数据存储和管理</a></li><li><a href="#数据分析和可视化" class="table-of-contents__link toc-highlight">数据分析和可视化</a></li><li><a href="#附加组件" class="table-of-contents__link toc-highlight">附加组件</a></li><li><a href="#选择正确的组件" class="table-of-contents__link toc-highlight">选择正确的组件</a></li><li><a href="#建立可观察性堆栈" class="table-of-contents__link toc-highlight">建立可观察性堆栈</a></li><li><a href="#devops中的可观察性" class="table-of-contents__link toc-highlight">DevOps中的可观察性:</a></li><li><a href="#现场可靠性工程-sre-中的可观测性" class="table-of-contents__link toc-highlight">现场可靠性工程 (SRE) 中的可观测性</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/devops和站点可靠性工程简介">DevOps和站点可靠性工程简介</a></li></ul></div><div class="col footer__col"><div class="footer__title">社交网络</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/zhouweico" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/zhouweico" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/about">关于</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 ZHOUWEI 保留所有权利</div></div></div></footer></div>
</body>
</html>