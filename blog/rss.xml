<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="rss.xsl"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>ZHOUWEI Blog</title>
        <link>https://zhouwei.co/blog</link>
        <description>ZHOUWEI Blog</description>
        <lastBuildDate>Mon, 02 Sep 2024 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh</language>
        <item>
            <title><![CDATA[AI CodeReview]]></title>
            <link>https://zhouwei.co/blog/2024/09/02/ai-codereview</link>
            <guid>https://zhouwei.co/blog/2024/09/02/ai-codereview</guid>
            <pubDate>Mon, 02 Sep 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[AI 代码审查与 Gitlab MR 集成，高效智能的代码审查解决方案。]]></description>
            <content:encoded><![CDATA[<p>AI 代码审查与 Gitlab MR 集成，高效智能的代码审查解决方案。</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="功能介绍">功能介绍<a href="https://zhouwei.co/blog/2024/09/02/ai-codereview#%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D" class="hash-link" aria-label="功能介绍的直接链接" title="功能介绍的直接链接">​</a></h2>
<ul>
<li>
<p>自动触发与及时响应</p>
<p>利用Gitlab的Webhook功能，实现代码提交、合并请求和标签创建等事件的自动触发。一旦有新的代码提交，系统即时响应，立即启动审查过程，无需手动干预。</p>
</li>
<li>
<p>Gitlab API接口利用</p>
<p>通过与Gitlab的API接口集成，方便后续的功能拓展和扩展。这种集成方式使得与Gitlab的交互更加灵活，能够支持更多自定义的审查需求。</p>
</li>
<li>
<p>全面自动审查</p>
<p>大模型自动审查Gitlab的代码，涵盖push（commit）、merge（合并请求）和tag（标签创建）等三种代码提交方式。无论是新的代码提交还是代码合并，系统都能自动检查并提供审查评论。</p>
</li>
<li>
<p>retrying重试机制</p>
<p>为了应对网络异常或其他问题，系统实现retrying重试机制。如果因为网络问题导致请求不成功，系统会自动进行重试，确保审查过程的可靠性和稳定性。</p>
</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="代码审查原理">代码审查原理<a href="https://zhouwei.co/blog/2024/09/02/ai-codereview#%E4%BB%A3%E7%A0%81%E5%AE%A1%E6%9F%A5%E5%8E%9F%E7%90%86" class="hash-link" aria-label="代码审查原理的直接链接" title="代码审查原理的直接链接">​</a></h2>
<p><img decoding="async" loading="lazy" alt="架构" src="https://zhouwei.co/assets/images/architecture-1b4bd2c7a4b12039d2797ed069a6ba3a.png" width="1851" height="919" class="img_ev3q"></p>
<ul>
<li>
<p>1、Gitlab 的 Webhook 事件推送</p>
<p>Gitlab 可以配置 Webhook，用于在代码提交、合并请求等事件发生时触发通知。当有新的代码提交或合并请求时，Gitlab 将向预先设置的 URL 发送 POST 请求，包含相关的事件数据。</p>
</li>
<li>
<p>2、解析 diff 内容并发送至大模型</p>
<p>当 Gitlab 收到 Webhook 事件后，可以解析 diff 内容，这是新提交的代码与现有代码之间的差异。然后，将这些差异发送给大模型的 API 端点，以便大模型能够理解代码变更的内容。</p>
</li>
<li>
<p>3、大模型处理并返回结果</p>
<p>大模型是一个强大的自然语言处理模型，能够理解和处理自然语言文本。当大模型收到 diff 内容后，它会解析、理解代码的变更，并对其中可能存在的问题、漏洞或优化建议进行分析和回复。大模型将处理后的结果返回给触发 Webhook 的 Gitlab 实例。</p>
</li>
<li>
<p>4、将大模型处理的结果进行评论展示</p>
<p>Gitlab 可以接收来自大模型的处理结果，并将其作为评论添加到对应的提交或合并请求中。这样，代码提交者和其他团队成员都可以查看大模型的审查结果，并根据建议做出相应的改进或修复。</p>
</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="提问词">提问词<a href="https://zhouwei.co/blog/2024/09/02/ai-codereview#%E6%8F%90%E9%97%AE%E8%AF%8D" class="hash-link" aria-label="提问词的直接链接" title="提问词的直接链接">​</a></h2>
<p>资深编程专家提问</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">messages = [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        "role": "system",</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        "content": "你是一位资深编程专家, gitlab的commit代码变更将以git diff 字符串的形式提供, 以格式「变更评分：实际的分数」给变更打分, 分数区间为0~100分。然后, 以精炼的语言、严厉的语气指出存在的问题。如果你觉得必要的情况下, 可直接给出修改后的内容。你的反馈内容必须使用严谨的markdown格式。"</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        "role": "user",</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        "content": f"请review这部分代码变更{content}",</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="效果展示">效果展示<a href="https://zhouwei.co/blog/2024/09/02/ai-codereview#%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA" class="hash-link" aria-label="效果展示的直接链接" title="效果展示的直接链接">​</a></h2>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="参考文献">参考文献<a href="https://zhouwei.co/blog/2024/09/02/ai-codereview#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE" class="hash-link" aria-label="参考文献的直接链接" title="参考文献的直接链接">​</a></h2>
<ul>
<li><a href="https://codereviewbot.ai/" target="_blank" rel="noopener noreferrer">https://codereviewbot.ai</a></li>
<li><a href="https://github.com/nangongchengfeng/Chat-CodeReview/" target="_blank" rel="noopener noreferrer">https://github.com/nangongchengfeng/Chat-CodeReview/</a></li>
</ul>]]></content:encoded>
            <author>hi@zhouwei.co (ZHOUWEI)</author>
            <category>AI</category>
            <category>CodeReview</category>
        </item>
        <item>
            <title><![CDATA[KubeCon + CloudNativeCon China]]></title>
            <link>https://zhouwei.co/blog/2019/06/24/KubeCon-CloudNativeCon</link>
            <guid>https://zhouwei.co/blog/2019/06/24/KubeCon-CloudNativeCon</guid>
            <pubDate>Mon, 24 Jun 2019 00:00:00 GMT</pubDate>
            <content:encoded><![CDATA[<p><img decoding="async" loading="lazy" src="https://zhouwei.co/assets/images/WechatIMG929-a966db20d02e1c4ed4d7bc4a356b14f1.jpg" width="912" height="502" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://zhouwei.co/assets/images/WechatIMG930-b3e40a12047509d801d760bba5a433f8.jpg" width="1618" height="1078" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://zhouwei.co/assets/images/WechatIMG931-72e3b3deb0ce7b9310aabac9350d774d.jpg" width="1920" height="1080" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://zhouwei.co/assets/images/WechatIMG932-9d9f7658154654682e5a8cee39ed52dc.jpg" width="1080" height="1440" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="https://zhouwei.co/assets/images/WechatIMG933-765e3f0670d3a4b9e7d578dbb4b5c6b2.jpg" width="1920" height="1080" class="img_ev3q"></p>]]></content:encoded>
            <author>hi@zhouwei.co (ZHOUWEI)</author>
            <category>KubeCon</category>
            <category>CloudNativeCon</category>
        </item>
    </channel>
</rss>